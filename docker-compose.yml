services:
  nCryptedText:
    image: node:24-alpine
    container_name: nCryptedText
    working_dir: /app
    restart: always
    ports:
      - "${PORT:-3000}:3000"
    volumes:
      - ./markdowns:/app/markdowns
    command: >
      sh -c "apk add --no-cache git &&
             if [ ! -f index.js ]; then
               git clone https://github.com/necdetuygur/nCryptedText.git /tmp/repo &&
               cp -rn /tmp/repo/* /app/ &&
               rm -rf /tmp/repo;
             fi &&
             node index.js"
